@model Customer.ViewModel.customerViewModel

@{
    ViewBag.Title = "Delete";
}

<h2>Delete</h2>

<h3>Are you sure you want to delete this?</h3>
<dl class="dl-horizontal">

 </dl>


        <div class="form-actions no-color">
            <input type="button" value="Delete" id="btndelete" class="btn btn-default" /> |
            @Html.ActionLink("Back to List", "Index")
        </div>
   

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script type="text/javascript" src="http://ajax.cdnjs.com/ajax/libs/json2/20110223/json2.js"></script>
    <script type="text/javascript">
        //Delete event handler.
        $(document).ready(function () {
            const z = window.location.pathname;
            var a = parseInt(z[z.length - 1])
            $.ajax({
                type: "GET",
                url: "http://localhost:50053/customer/Delete/" + a,
                //data: '{id: "' + a + '" }',
                //contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (r) {
                    console.log(r);
                    var k = new Date(parseInt(data.Birth_Date.substr(6)));
                     content += ' Birth Date : ' + ("0" + k.getDate()).slice(-2) + "/" +
                        ("0" + (k.getMonth() + 1)).slice(-2) + "/" +
                        k.getFullYear() + '<br/>';

                    $('.dl-horizontal').append(`

                            <dt>
                                Customer Name:
                            </dt>
                            <dd>
                                `+ r.name + `
                            </dd>

                            <dt>
                               Address1:
                            </dt>

                            <dd>
                                `+ r.address1 + `
                            </dd>

                            <dt>
                                Address2:
                            </dt>

                            <dd>
                              `+ r.address2 + `
                            </dd>

                            <dt>
                                Country:
                            </dt>

                            <dd>
                                `+ r.country + `
                            </dd>

                            <dt>
                                  postcode:
                            </dt>

                            <dd>
                                `+ r.postcode + `
                            </dd>

                            <dt>
                                 email:
                            </dt>

                            <dd>
                                `+ r.email + `
                            </dd>

                            <dt>
                                mobile:
                            </dt>

                            <dd>
                                `+ r.mobile + `
                            </dd>

                            <dt>
                                 Birthdate:
                            </dt>

                            <dd>
                                `+ r.content+ `
                            </dd>

                            <dt>
                                Active:
                            </dt>

                            <dd>
                                  `+ r.Active + `
                            </dd>

                            <dt>
                                CreatedDate:
                            </dt>

                            <dt>
                                  City:
                            </dt>

                            <dd>
                                   `+ r.city + `
                            </dd>

        `)
                },
                error: function (a) {
                    console.log(a)
                }
            });
            $("#btndelete").click(function () {
              
                if (confirm("Do you want to delete this row?")) {

                    $.ajax({
                        type: "POST",
                        url: "http://localhost:50053/customer/DeleteConfirmed/" + a,
                        data: '{id: "' + a + '" }',
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (r) {
                            console.log(r);
                            window.location.href = "/customer/Index";
                        }, error: function (e) {
                            console.log(e)
                            window.location.href = "/customer/Index";
                        }
                    });
                }
            });
        });


    </script>


